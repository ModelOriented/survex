<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Survival analysis models are commonly used in medicine and other areas. Many of them
    are too complex to be interpreted by human. Exploration and explanation is needed, but
    standard methods do not give a broad enough picture. survex provides easy-to-apply
    methods for explaining survival models, both complex black-boxes and simpler statistical models.
    They include methods specific to survival analysis such as SurvSHAP(t) described in Krzyzinski et al., (2022)
    &lt;arXiv:2208.11080&gt;, SurvLIME introduced in Kovalev et al., (2020) &lt;doi:10.1016/j.knosys.2020.106164&gt; as well as
    extensions of existing ones described in Biecek et al., (2021) &lt;doi:10.1201/9780429027192&gt;.">
<title>Explainable Machine Learning in Survival Analysis • survex</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Explainable Machine Learning in Survival Analysis">
<meta property="og:description" content="Survival analysis models are commonly used in medicine and other areas. Many of them
    are too complex to be interpreted by human. Exploration and explanation is needed, but
    standard methods do not give a broad enough picture. survex provides easy-to-apply
    methods for explaining survival models, both complex black-boxes and simpler statistical models.
    They include methods specific to survival analysis such as SurvSHAP(t) described in Krzyzinski et al., (2022)
    &lt;arXiv:2208.11080&gt;, SurvLIME introduced in Kovalev et al., (2020) &lt;doi:10.1016/j.knosys.2020.106164&gt; as well as
    extensions of existing ones described in Biecek et al., (2021) &lt;doi:10.1201/9780429027192&gt;.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">survex</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/custom-explainers.html">Creating custom explainers</a>
    <a class="dropdown-item" href="articles/survex-usage.html">Package usage</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ModelOriented/survex/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="survex-explainable-machine-learning-in-survival-analysis-">survex: Explainable Machine Learning in Survival Analysis <img src="reference/figures/survex.png" align="right" width="150px"><a class="anchor" aria-label="anchor" href="#survex-explainable-machine-learning-in-survival-analysis-"></a>
</h1></div>

<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>Survival analysis is a task dealing with time-to-event prediction. Aside from the well-understood models like CPH, many more complex models have recently emerged, but most lack interpretability. Due to a functional type of prediction, either in the form of survival function or cumulative hazard function, standard model-agnostic explanations cannot be applied directly.</p>
<p>The <code>survex</code> package provides model-agnostic explanations for machine learning survival models. It is based on the <a href="https://github.com/ModelOriented/DALEX" class="external-link"><code>DALEX</code> package</a>. If you’re unfamiliar with explainable machine learning, consider referring to the <a href="https://ema.drwhy.ai" class="external-link">Explanatory Model Analysis</a> book – most of the methods included in <code>survex</code> extend these described in EMA and implemented in <code>DALEX</code> but to models with functional output.</p>
<p>The main <code><a href="reference/explain_survival.html">explain()</a></code> function uses a model and data to create a standardized <code>explainer</code> object, which is further used as an interface for calculating predictions. We automate creating explainers from the following packages: <code>mlr3proba</code>, <code>censored</code>, <code>ranger</code>, <code>randomForestSRC</code>, and <code>survival</code>. <strong>Raise an Issue on GitHub if you find models from other packages that we can incorporate into the <code><a href="reference/explain_survival.html">explain()</a></code> interface.</strong></p>
<p>Note that an explainer can be created for <strong>any</strong> survival model, using the <code><a href="reference/explain_survival.html">explain_survival()</a></code> function by passing <code>model</code>, <code>data</code>, <code>y</code>, and <code>predict_survival_function</code> arguments.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The package is available on <a href="https://cran.r-project.org/package=survex" class="external-link">CRAN</a>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"survex"</span><span class="op">)</span></span></code></pre></div>
<p>The latest development version can be installed from GitHub using <code>devtools::install_github()</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"https://github.com/ModelOriented/survex"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="simple-demo">Simple demo<a class="anchor" aria-label="anchor" href="#simple-demo"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://modeloriented.github.io/survex/">"survex"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/therneau/survival" class="external-link">"survival"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/imbs-hl/ranger" class="external-link">"ranger"</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create a model</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ranger/man/ranger.html" class="external-link">ranger</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">veteran</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create an explainer</span></span>
<span><span class="va">explainer</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/explain_survival.html">explain</a></span><span class="op">(</span><span class="va">model</span>, </span>
<span>                     data <span class="op">=</span> <span class="va">veteran</span><span class="op">[</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span><span class="op">]</span>,</span>
<span>                     y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">veteran</span><span class="op">$</span><span class="va">time</span>, <span class="va">veteran</span><span class="op">$</span><span class="va">status</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># evaluate the model</span></span>
<span><span class="fu"><a href="reference/model_performance.surv_explainer.html">model_performance</a></span><span class="op">(</span><span class="va">explainer</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># visualize permutation-based feature importance</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="reference/model_parts.surv_explainer.html">model_parts</a></span><span class="op">(</span><span class="va">explainer</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># explain one prediction with SurvSHAP(t)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="reference/predict_parts.surv_explainer.html">predict_parts</a></span><span class="op">(</span><span class="va">explainer</span>, <span class="va">veteran</span><span class="op">[</span><span class="fl">1</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p><a href="https://github.com/ModelOriented/survex/blob/main/misc/cheatsheet.pdf" class="external-link"><img src="reference/figures/cheatsheet.png" alt="survex usage cheatsheet"></a></p>
</div>
<div class="section level2">
<h2 id="related-work">Related work<a class="anchor" aria-label="anchor" href="#related-work"></a>
</h2>
<ul>
<li>H. Ishwaran, U. B. Kogalur, E. H. Blackstone, M. S. Lauer. <a href="https://projecteuclid.org/journalArticle/Download?urlId=10.1214%2F08-AOAS169" class="external-link">Random survival forests</a>. Annals of Applied Statistics, 2008.</li>
<li>M. S. Kovalev, L. V. Utkin, E. M. Kasimov. <a href="https://doi.org/10.1016/j.knosys.2020.106164" class="external-link">SurvLIME: A method for explaining machine learning survival models</a>. Knowledge-Based Systems, 2020.</li>
<li>R. Sonabend, F. J. Király, A. Bender, B. Bischl, M. Lang. <a href="https://doi.org/10.1093/bioinformatics/btab039" class="external-link">mlr3proba: an R package for machine learning in survival analysis</a>. Bioinformatics, 2021.</li>
<li>E. Hvitfeldt, H. Frick. <a href="https://github.com/tidymodels/censored" class="external-link">censored: ‘parsnip’ Engines for Survival Models</a>. CRAN v0.1.0, 2022.</li>
<li>M. Krzyziński, M. Spytek, H. Baniecki, P. Biecek. <a href="https://arxiv.org/abs/2208.11080" class="external-link">SurvSHAP(t): Time-dependent explanations of machine learning survival models</a>. arXiv preprint arXiv:2208.11080, 2022.</li>
<li>A. Grudziąż, A. Gosiewska, P.Biecek. <a href="https://doi.org/10.21105/joss.00961" class="external-link">survxai: an R package for structure-agnostic explanations of survival models</a>. Journal of Open Source Software, 2018.</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=survex" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/ModelOriented/survex/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/ModelOriented/survex/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 3)</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing survex</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Mikołaj Spytek <br><small class="roles"> Author, maintainer </small>  </li>
<li>Mateusz Krzyziński <br><small class="roles"> Author </small>  </li>
<li>Hubert Baniecki <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-6661-5364" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Przemyslaw Biecek <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-8423-1823" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/ModelOriented/survex/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/ModelOriented/survex/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/ModelOriented/survex?branch=main" class="external-link"><img src="https://codecov.io/gh/ModelOriented/survex/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://cran.r-project.org/package=survex" class="external-link"><img src="https://www.r-pkg.org/badges/version/survex" alt="CRAN status"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Mikołaj Spytek, Mateusz Krzyziński, Hubert Baniecki, Przemyslaw Biecek.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
