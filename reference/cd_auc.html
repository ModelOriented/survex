<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function calculates the Cumulative/Dynamic AUC metric for a survival model. It is done using the
estimator proposed proposed by Uno et al. [1],
and Hung and Chang [2]."><title>Calculate Cumulative/Dynamic AUC — cd_auc • survex</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate Cumulative/Dynamic AUC — cd_auc"><meta property="og:description" content="This function calculates the Cumulative/Dynamic AUC metric for a survival model. It is done using the
estimator proposed proposed by Uno et al. [1],
and Hung and Chang [2]."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">survex</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/custom-explainers.html">Creating custom explainers</a>
    <a class="dropdown-item" href="../articles/survex-usage.html">Package usage</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ModelOriented/survex/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Calculate Cumulative/Dynamic AUC</h1>
      <small class="dont-index">Source: <a href="https://github.com/ModelOriented/survex/blob/HEAD/R/metrics.R" class="external-link"><code>R/metrics.R</code></a></small>
      <div class="d-none name"><code>cd_auc.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function calculates the Cumulative/Dynamic AUC metric for a survival model. It is done using the
estimator proposed proposed by Uno et al. [<a href="https://www.jstor.org/stable/27639883#metadata_info_tab_contents" class="external-link">1</a>],
and Hung and Chang [<a href="https://www.jstor.org/stable/41000414#metadata_info_tab_contents" class="external-link">2</a>].</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cd_auc</span><span class="op">(</span>y_true <span class="op">=</span> <span class="cn">NULL</span>, risk <span class="op">=</span> <span class="cn">NULL</span>, surv <span class="op">=</span> <span class="cn">NULL</span>, times <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>y_true</dt>
<dd><p>a <code><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">survival::Surv</a></code> object containing the times and statuses of observations for which the metric will be evaluated</p></dd>


<dt>risk</dt>
<dd><p>ignored, left for compatibility with other metrics</p></dd>


<dt>surv</dt>
<dd><p>a matrix containing the predicted survival functions for the considered observations, each row represents a single observation, whereas each column one time point</p></dd>


<dt>times</dt>
<dd><p>a vector of time points at which the survival function was evaluated</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>a numeric vector of length equal to the length of the times vector, each value (from the range from 0 to 1) represents the AUC metric at a specific time point, with higher values indicating better performance.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>C/D AUC is an extension of the AUC metric known from classification models.
Its values represent the model's performance at specific time points.
It can be integrated over the considered time range.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    

<ul><li><p>[1] Uno, Hajime, et al. <a href="https://www.jstor.org/stable/27639883#metadata_info_tab_contents" class="external-link">"Evaluating prediction rules for t-year survivors with censored regression models."</a> Journal of the American Statistical Association 102.478 (2007): 527-537.</p></li>
<li><p>[2] Hung, Hung, and Chin‐Tsang Chiang. <a href="https://www.jstor.org/stable/41000414#metadata_info_tab_contents" class="external-link">"Optimal composite markers for time‐dependent receiver operating characteristic curves with censored survival data."</a> Scandinavian Journal of Statistics 37.4 (2010): 664-679.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="loss_one_minus_cd_auc.html">loss_one_minus_cd_auc()</a></code> <code><a href="integrated_cd_auc.html">integrated_cd_auc()</a></code> <code><a href="brier_score.html">brier_score()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/therneau/survival" class="external-link">survival</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://modeloriented.github.io/survex/">survex</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cph</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/coxph.html" class="external-link">coxph</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">veteran</span>, model <span class="op">=</span> <span class="cn">TRUE</span>, x <span class="op">=</span> <span class="cn">TRUE</span>, y <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cph_exp</span> <span class="op">&lt;-</span> <span class="fu"><a href="explain_survival.html">explain</a></span><span class="op">(</span><span class="va">cph</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Preparation of a new explainer is initiated </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; model label       :  coxph ( <span style="color: #BBBB00;"> default </span> ) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; data              :  137  rows  6  cols ( <span style="color: #BBBB00;"> extracted from the model </span> ) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; target variable   :  137  values ( 128 events and 9 censored ) ( <span style="color: #BBBB00;"> extracted from the model </span> ) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; times             :  94 unique time points , min = 1 , mean = 119.9706 , max = 845.56 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; times             :  ( <span style="color: #BBBB00;"> generated from y with method quantiles </span> ) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; predict function  :  predict.coxph with type = 'risk' will be used ( <span style="color: #BBBB00;"> default </span> ) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; predict survival function  :  predictSurvProb.coxph will be used ( <span style="color: #BBBB00;"> default </span> ) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; predict cumulative hazard function  :  -log(predict_survival_function) will be used ( <span style="color: #BBBB00;"> default </span> ) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   -&gt; model_info        :  package survival , ver. 3.3.1 , task survival ( <span style="color: #BBBB00;"> default </span> ) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  <span style="color: #00BB00;"> A new explainer has been created! </span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">cph_exp</span><span class="op">$</span><span class="va">y</span></span></span>
<span class="r-in"><span><span class="va">times</span> <span class="op">&lt;-</span> <span class="va">cph_exp</span><span class="op">$</span><span class="va">times</span></span></span>
<span class="r-in"><span><span class="va">surv</span> <span class="op">&lt;-</span> <span class="va">cph_exp</span><span class="op">$</span><span class="fu">predict_survival_function</span><span class="op">(</span><span class="va">cph</span>, <span class="va">cph_exp</span><span class="op">$</span><span class="va">data</span>, <span class="va">times</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">cd_auc</span><span class="op">(</span><span class="va">y</span>, surv <span class="op">=</span> <span class="va">surv</span>, times <span class="op">=</span> <span class="va">times</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 0.6592593 0.6592593 0.7388060 0.8045455 0.8352713 0.7846667 0.7845528</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8] 0.7845528 0.7398907 0.7411765 0.7506690 0.7516420 0.7516420 0.7628458</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [15] 0.7982143 0.7982143 0.8151515 0.8333333 0.8333333 0.8487523 0.8407738</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [22] 0.8512279 0.8333333 0.8296703 0.8358247 0.8165414 0.8059629 0.8059629</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [29] 0.8084541 0.8184397 0.8031367 0.8021800 0.8027816 0.8158371 0.8392857</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [36] 0.8392857 0.8405041 0.8405041 0.8363636 0.8230108 0.8174603 0.8264127</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [43] 0.8299189 0.8191898 0.8432836 0.8432836 0.8410158 0.8375428 0.8326882</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [50] 0.8326882 0.8454545 0.8485378 0.8485378 0.8465632 0.8465632 0.8353549</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [57] 0.8340173 0.8340173 0.8107607 0.8033097 0.8033097 0.7910557 0.7910557</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [64] 0.7805542 0.7888720 0.7824742 0.7830979 0.7721622 0.7830033 0.7801256</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [71] 0.7919580 0.8023810 0.7876756 0.7876756 0.7870249 0.7799723 0.7825000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [78] 0.7750737 0.7739130 0.7701149 0.7818912 0.7875817 0.7852941 0.7775956</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [85] 0.7572590 0.7816377 0.7849928 0.7763780 0.7673611 0.7846154 0.8689567</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [92] 0.8545455 0.8233831 0.8740741</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Mikołaj Spytek, Mateusz Krzyziński, Hubert Baniecki, Przemyslaw Biecek.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

